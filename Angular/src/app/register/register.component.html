<title>Register</title>
@if (!loading) {
  @if (this.info) {
    <div class="parent">
      <div class="info child">
        <p>{{ this.info }}</p>
      </div>
    </div>
  } @else {
    <div class="parent">
      <div class="child">
        @if (this.submitted) {
          <h2>Selecciona tu rol</h2>
          @if (this.error) {
            <div class="error">
              <p>{{ this.error }}</p>
            </div>
          }
          <form class="radioform" (submit)="register()">
            <div class="container">
              <div class="radio-tile-group">
                <div class="input-container">
                  <input
                    type="radio"
                    value="User"
                    [(ngModel)]="type"
                    name="type"
                    required
                  />
                  <div class="radio-tile">
                    <ion-icon name="person"></ion-icon>
                    <label>Client</label>
                  </div>
                </div>
                <div class="input-container">
                  <input
                    type="radio"
                    value="Professional"
                    [(ngModel)]="type"
                    name="type"
                    required
                  />
                  <div class="radio-tile">
                    <ion-icon name="cash"></ion-icon>
                    <label>Professional</label>
                  </div>
                </div>
              </div>
            </div>
            <button type="submit">Registrarse</button>
          </form>
        } @else {
          <h2>Regístrate</h2>
          @if (this.error) {
            <div class="error">
              <p>{{ this.error }}</p>
            </div>
          }
          <form (submit)="preregister()">
            <div class="register input-group">
              <input
                type="text"
                placeholder="Usuario"
                [(ngModel)]="username"
                name="username"
                required
              />
            </div>
            <div class="register input-group">
              <input
                type="text"
                placeholder="Correo Electrónico"
                [(ngModel)]="email"
                name="email"
                required
              />
            </div>
            <div class="register input-group">
              <input
                type="password"
                placeholder="Contraseña"
                [(ngModel)]="password"
                name="password"
                required
              />
            </div>
            <div class="register input-group">
              <input
                type="password"
                placeholder="Confirma la contraseña"
                [(ngModel)]="passwordconfirm"
                name="passwordconfirm"
                required
              />
            </div>
            <button type="submit">Siguiente</button>
          </form>
          <div class="bottomlinks">
            <a href="./login">Iniciar Sesión</a>
          </div>
        }
      </div>
    </div>
  }
} @else {
  <app-loading></app-loading>
}
